学习目标:
1.了解两类copy(PTC | Remote Mirror & Copy)每个分类下面有哪几种copy方式
2.针对每种copy方式,需要了解:
    a overview
    b. options & configuration
    c. interfaces
    d. performance | scalability | 特性
    e. examples
3. CSM architecture 
4. DS CLI
5. CSM GUI
6. license
==========================
1.概要
=========================
1.1两类copy: PTC | Remote Mirror & copy
1.2.PTC下有3种Copy
    i FlashCopy(以下简称FC)
    ii FlashCopy SE (以下简称FC SE)
    iii Remote Pair FlashCopy(Preserve Mirror)
1.3 Remote Mirror and Copy
    i Metro Mirror (简称MM)
    ii Global Copy  (简称GC)
    iii Global Mirror (简称GM)
    iv 3-site Metro/Global Mirror with Incremental Resync 
    v IBM Multiple Target Peer-to-Peer Remote Copy
================
简介(S= source volume, T=target volume)
================
1.2 PTC
    create full volume copies of data in a Storage
1.2.1 FlashCopy
    i relationship between S&T
    ii bitmap of S
    iii a background process copies the tracks from S to T
1.2.2  FlashCopy SE
    T is a Track-Space-Efficient volume: physical space is allocated dynamically on a track basis
    Why FC SE?----reduce the amount of physical space
    How FC SE reduce space?
    Where FC SE is useful?
        ---used for copies that are short term in nature
        ---or long term copies whose installation need few updates to S & T
1.2.3 Remote Pair FlashCopy (Preserve Mirror)
    A solution to FC onto MM S:
        -- data replication
        -- data migration,
        -- Remote Copy,
        -- disaster recovery

1.3 Remote Mirror and Copy (简称RMC)
    provide a set of flexible data mirroring techniques
    allow replication between volumes on two or more storage systems.
    data backup and disaster recovery
1.3.1 (Metro Mirror)MM
    provides real-time mirroring of logical volumes between two DS8000 systems that can be located up to 300 km without an RPQ from each other
    a synchronous copy solution where write operations are completed on both copies

1.3.2 Global Copy
    non-synchronously copy---support long distance 
    How does it work?-- S sends T a periodic and incremental copy of updated tracks, instead of sending constant stream of updates
    Advantage: minimum impact to app writes 4 S, 
1.3.3 Global Mirror
    What--provides a long-distance Remote Copy feature across two sites using asynchronous technology.
    How--the data that the host writes to the Storage System at the local site is asynchronously shadowed to the Storage System at the remote site.
    Advantage: 
        1--support operations over unlimited distances between local and remote sites.
        2-- efficient synhronization of local and remote sites without support for failover and fail back modes.

1.3.4 3-site Metro/Global Mirror with Incremental Resync
    what--
        1.combines a Metro Mirror and a Global Mirror together
        2.implement a 3-site disaster recovery solution
    how--
    Incremental Resync:change the copy target destination of a copy relation without requiring a full copy of the data.        
1.3.5    IBM Multiple Target Peer-to-Peer Remote Copy(Aka. multiple target PPRC)
    
    benefit:enhances a multi-site disaster recovery environment
    how:providing thecapability to have two PPRC relationships on a single primary volume, with another remote site for additional data protection.
    enhancement:
        i Mirrors data from a single primary (local) site to two secondary (remote) sites
        ii disaster recovery increased:
            - Synchronous replication
            – Asynchronous replication
            - a combination of the above two.
        iii Improve a cascaded Metro/Global Mirror configuration and simplifies some procedures
        
==============================
2. Copy Service architcture
==============================
结构:
1. copy service structure 架构
    三层架构: 
        1.1 管理控制台(Management console)
        1.2 存储单元
        1.3 SFI(存储设施镜像 Storage Facility Image)
        1.4 Storage Complex(存储双工)
2. copy service 管理
3. Easy Tier 和I/O优先级管理
2.1 Intro

------------
2.1 Intro:
    DS8K的通信架构是基于Storage Complex
    2.1.1 管理控制台(Management console)
        是个PC
        用Storage Complex管理设备
        以8k为例:(叫做HMC,hardware Management Console)
            1.dedicated PC(专用PC)
            2. 预装Linux OS
            3. 预装管理软件
            4. 用户可使用DS GUI或者 DSCLI与HMC交互
    2.1.2 存储单元(Storage Unit)
        指的是一个物理存储设备,能看见的(包括扩展的外壳)
    2.1.3 SFT    Storage Facility Image)
        区分Storage Unit和SFI--
        SFI序列号以1结尾,Storage Unit 以0结尾
        WWNN也不同
        以8K为例:
    2.1.4 Storage Complex
     结构: 一个8K Storage Complex 有1+个(Storage Unit),由1~2个两个DS HMC管理.
     只有同一系列的Storage才能被同一个Storage Complex管理
     但是,不同系列可以加入RMC管理

2.2 Copy services 管理结构
    DS CLI/ DS GUI
2.3 easy tier& IO PM
    ET:auto-rebalancing, manual volume rebalancing and volume migration , thin-provisioning    
    IO PM: 


2.针对每种copy方式,需要了解:
    a overview
    b. options & configuration
    c. interfaces
    d. performance | scalability | 特性
    e. examples

============Flas copy & FC SE =======
FC AKA Point in Time copy(PTC ) or time-zero copy(time 0 copy)
一. Over view
方向:
1.FC operational areas
    Production backup system
    Data mining system.
    Test system
    三种版本:
        1.标准FC:使用fully provisioned volume
        2.FC SE使用Track-Space-Efficient volume作为T
        3 thin-provisioned ESE


2.basic concepts
    relationship btwn S&C
    步骤:
        1.创建FC relationship
            创建一个指针表,包括bitmap到target
         与此同时.8k在短期保存IO操作到一个vol中
         bitmap中所有bit都设置了初始值,说明没有data block被copy
         bitmap entry 中1表示track还没被copy,0表示已copy.
    copy过程中的读写:
        S读写:
            1.读:直接从s读
            2.写: 
                FC: 先确定t0 data复制到T vol,再写S
                FC SE:确定同上,再写到repository
        T读写:
            1.读: 查bitmap看看t0 data是否已copy到T vol上,
                已copy:从T读
                未copy:从S读
            2写:
                确保bitmap已更新.bit map位置为0,防止S写数据.
    停止FC relationship                
        copy结束后停止.可以被显示的withDraw

3.  Full vol copy
        只有FC支持full copy
    No copy option
4.FC combiination with other CS
    >4.1 FC w/ MM &GC
    >4.2 Remote Pair flash copy   
    >4.3 DC & GM 

二. FC options
    Multiple Relationship FlashCopy:0-12个T vol
    Consistency Group FlashCopy
    FlashCopy on existing Metro Mirror or Global Copy source
    Remote Pair FlashCopy (Preserve Mirror)
----P87    
    Incremental FlashCopy
    Remote FlashCopy
    Persistent FlashCopy
    Reverse Restore and Fast Reverse Restore
    FlashCopy SE (Space-Efficient)
    FlashCopy with thin-provisioned Extent-Space-Efficient (ESE) volume
5.FC w thin-provisioned Extent-Space-Effcient(ESE) volume
6.Remote Pair FC


